<!doctype html>
<html class="docs-version-v9.0.0" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Relay RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Relay Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-44373548-50","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-44373548-50"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-44373548-50",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Relay" href="/opensearch.xml"><title data-react-helmet="true">Runtime Architecture | Relay</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://relay.dev/img/relay.png"><meta data-react-helmet="true" name="twitter:image" content="https://relay.dev/img/relay.png"><meta data-react-helmet="true" property="og:url" content="https://relay.dev/docs/v9.0.0/runtime-architecture/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="v9.0.0"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-v9.0.0"><meta data-react-helmet="true" property="og:title" content="Runtime Architecture | Relay"><meta data-react-helmet="true" name="description" content="The Relay runtime is a full-featured GraphQL client that is designed for high performance even on low-end mobile devices and is capable of scaling to large, complex apps. The runtime API is not intended to be used directly in product code, but rather to provide a foundation for building higher-level product APIs such as React/Relay. This foundation includes:"><meta data-react-helmet="true" property="og:description" content="The Relay runtime is a full-featured GraphQL client that is designed for high performance even on low-end mobile devices and is capable of scaling to large, complex apps. The runtime API is not intended to be used directly in product code, but rather to provide a foundation for building higher-level product APIs such as React/Relay. This foundation includes:"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://relay.dev/docs/v9.0.0/runtime-architecture/"><link data-react-helmet="true" rel="alternate" href="https://relay.dev/docs/v9.0.0/runtime-architecture/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://relay.dev/docs/v9.0.0/runtime-architecture/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.4d704aec.css">
<link rel="preload" href="/assets/js/runtime~main.f7f66203.js" as="script">
<link rel="preload" href="/assets/js/main.b60abdb4.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>
<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title">Relay</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/blog/">Blog</a><a class="navbar__item navbar__link" href="/help/">Help</a><a href="https://github.com/facebook/relay" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/docs/v9.0.0/">v9.0.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/">Next 🚧</a></li><li><a class="dropdown__link" href="/docs/">v14.0.0</a></li><li><a class="dropdown__link" href="/docs/v13.0.0/">v13.0.0</a></li><li><a class="dropdown__link" href="/docs/v12.0.0/">v12.0.0</a></li><li><a class="dropdown__link" href="/docs/v11.0.0/">v11.0.0</a></li><li><a class="dropdown__link" href="/docs/v10.1.3/runtime-architecture/">v10.1.3</a></li><li><a class="dropdown__link" href="/docs/v10.1.2/runtime-architecture/">v10.1.2</a></li><li><a class="dropdown__link" href="/docs/v10.1.1/runtime-architecture/">v10.1.1</a></li><li><a class="dropdown__link" href="/docs/v10.1.0/runtime-architecture/">v10.1.0</a></li><li><a class="dropdown__link" href="/docs/v10.0.1/runtime-architecture/">v10.0.1</a></li><li><a class="dropdown__link" href="/docs/v10.0.0/runtime-architecture/">v10.0.0</a></li><li><a class="dropdown__link" href="/docs/v9.1.0/runtime-architecture/">v9.1.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/v9.0.0/runtime-architecture/">v9.0.0</a></li><li><a class="dropdown__link" href="/docs/v8.0.0/runtime-architecture/">v8.0.0</a></li><li><a class="dropdown__link" href="/docs/v7.1.0/runtime-architecture/">v7.1.0</a></li><li><a class="dropdown__link" href="/docs/v7.0.0/runtime-architecture/">v7.0.0</a></li><li><a class="dropdown__link" href="/docs/v6.0.0/runtime-architecture/">v6.0.0</a></li><li><a class="dropdown__link" href="/docs/v5.0.0/runtime-architecture/">v5.0.0</a></li><li><a class="dropdown__link" href="/docs/v4.0.0/runtime-architecture/">v4.0.0</a></li><li><a class="dropdown__link" href="/docs/v3.0.0/runtime-architecture/">v3.0.0</a></li><li><a class="dropdown__link" href="/docs/v2.0.0/runtime-architecture/">v2.0.0</a></li><li><a class="dropdown__link" href="/docs/v1.7.0/runtime-architecture/">v1.7.0</a></li><li><a class="dropdown__link" href="/docs/v1.6.2/runtime-architecture/">v1.6.2</a></li><li><a class="dropdown__link" href="/docs/v1.6.1/runtime-architecture/">v1.6.1</a></li><li><a class="dropdown__link" href="/docs/v1.6.0/runtime-architecture/">v1.6.0</a></li><li><a class="dropdown__link" href="/docs/v1.5.0/runtime-architecture/">v1.5.0</a></li><li><a class="dropdown__link" href="/docs/v1.4.1/runtime-architecture/">v1.4.1</a></li><li><a class="dropdown__link" href="/versions/">All versions</a></li></ul></div><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">🌜</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">🌞</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">API Reference</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Guides</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Principles &amp; Architecture</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v9.0.0/thinking-in-graphql/">Thinking in GraphQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v9.0.0/thinking-in-relay/">Thinking In Relay</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v9.0.0/architecture-overview/">Architecture Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v9.0.0/compiler-architecture/">Compiler Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/v9.0.0/runtime-architecture/">Runtime Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v9.0.0/videos/">Videos</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Community</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_1lV3"><div class="docItemContainer_zt2Y"><article><div><span class="badge badge--secondary">Version: v9.0.0</span></div><header><h1 class="docTitle_1y8q">Runtime Architecture</h1></header><div class="markdown"><p>The Relay runtime is a full-featured GraphQL client that is designed for high performance even on low-end mobile devices and is capable of scaling to large, complex apps. The runtime API is not intended to be used directly in product code, but rather to provide a foundation for building higher-level product APIs such as React/Relay. This foundation includes:</p><ul><li>A normalized, in-memory object graph/cache.</li><li>An optimized &quot;write&quot; operation for updating the cache with the results of queries/mutations/subscriptions.</li><li>A mechanism for reading data from the cache and subscribing for updates when these results change due to a mutation, subscription update, etc.</li><li>Garbage collection to evict entries from the cache when they can no longer be referenced by any view.</li><li>A generic mechanism for intercepting data prior to publishing it to the cache and either synthesizing new data or merging new and existing data together (which among other things enables the creation of a variety of pagination schemes).</li><li>Mutations with optimistic updates and the ability to update the cache with arbitrary logic.</li><li>Support for live queries where supported by the network/server.</li><li>Core primitives to enable subscriptions.</li><li>Core primitives for building offline/persisted caching.</li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="comparison-to-classic-relay">Comparison to Classic Relay<a aria-hidden="true" class="hash-link" href="#comparison-to-classic-relay" title="Direct link to heading">​</a></h2><p>For users of classic Relay, note that the runtime makes as few assumptions as possible about GraphQL. Compared to earlier versions of Relay there is no concept of routes, there are no limitations on mutation input arguments or side-effects, arbitrary root fields just work, etc. At present, the main restriction from classic Relay that remains is the use of the <code>Node</code> interface and <code>id</code> field for object identification. However there is no fundamental reason that this restriction can&#x27;t be relaxed (there is a single place in the codebase where object identity is determined), and we welcome feedback from the community about ways to support customizable object identity without negatively impacting performance.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="data-types">Data Types<a aria-hidden="true" class="hash-link" href="#data-types" title="Direct link to heading">​</a></h2><p> (subsequent sections explain how these types are used in practice):</p><ul><li><code>DataID</code> (type): A globally unique or client-generated identifier for a record, stored as a string.</li><li><code>Record</code> (type): A representation of a distinct data entity with an identity, type, and fields. Note that the actual runtime representation is opaque to the system: all accesses to <code>Record</code> objects (including record creation) is mediated through the <code>RelayModernRecord</code> module. This allows the representation itself to be changed in a single place (e.g. to use <code>Map</code>s or a custom class). It is important that other code does not assume that <code>Record</code>s will always be plain objects.</li><li><code>RecordSource</code> (type): A collection of records keyed by their data ID, used both to represent the cache and updates to it. For example the store&#x27;s record cache is a <code>RecordSource</code> and the results of queries/mutations/subscriptions are normalized into <code>RecordSource</code>s that are published to a store. Sources also define methods for asynchronously loading records in order to (eventually) support offline use-cases. Currently the only implementation of this interface is <code>RelayInMemoryRecordSource</code>; future implementations may add support for loading records from disk.</li><li><code>Store</code> (type): The source of truth for an instance of <code>RelayRuntime</code>, holding the canonical set of records in the form of a <code>RecordSource</code> (though this is not required). Currently the only implementation is <code>RelayModernStore</code>.</li><li><code>Network</code> (type): Provides methods for fetching query data from and executing mutations against an external data source.</li><li><code>Environment</code> (type): Represents an encapsulated environment combining a <code>Store</code> and <code>Network</code>, providing a high-level API for interacting with both. This is the main public API of <code>RelayRuntime</code>.</li></ul><p>Types for working with queries and their results include:</p><ul><li><code>Selector</code> (type): A selector defines the starting point for a traversal into the graph for the purposes of targeting a subgraph, combining a GraphQL fragment, variables, and the Data ID for the root object from which traversal should progress. Intuitively, this &quot;selects&quot; a portion of the object graph.</li><li><code>Snapshot</code> (type): The (immutable) results of executing a <code>Selector</code> at a given point in time. This includes the selector itself, the results of executing it, and a list of the Data IDs from which data was retrieved (useful in determining when these results might change).</li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="data-model">Data Model<a aria-hidden="true" class="hash-link" href="#data-model" title="Direct link to heading">​</a></h2><p>Relay Runtime is designed for use with GraphQL schemas that describe <strong>object graphs</strong> in which objects have a type, an identity, and a set of fields with values. Objects may reference each other, which is represented by fields whose values are one or more other objects in the graph <!-- -->[1]<!-- -->. To distinguish from JavaScript <code>Object</code>s, these units of data are referred to as <code>Record</code>s. Relay represents both its internal cache as well as query/mutation/etc results as a mapping of <strong>data ID</strong>s to <strong>records</strong>. The data ID is the unique (with respect to the cache) identifier for a record - it may be the value of an actual <code>id</code> field or based on the path to the record from the nearest object with an <code>id</code> (such path-based ids are called <strong>client ids</strong>). Each <code>Record</code> stores its data ID, type, and any fields that have been fetched. Multiple records are stored together as a <code>RecordSource</code>: a mapping of data IDs to <code>Record</code> instances.</p><p>For example, a user and their address might be represented as follows:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// GraphQL Fragment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fragment on </span><span class="token maybe-class-name">User</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  address </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    city</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Response</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;842472&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Joe&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  address</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    city</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Seattle&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Normalized Representation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">RecordSource</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;842472&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Record</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    __id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;842472&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    __typename</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;User&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// the type is known statically from the fragment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;842472&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Joe&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    address</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">__ref</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;client:842472:address&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// link to another record</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;client:842472:address&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Record</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// A client ID, derived from the path from parent &amp; parent&#x27;s ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    __id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;client:842472:address&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    __typename</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Address&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    city</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Seattle&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>[1]<!-- --> Note that GraphQL itself does not impose this constraint, and Relay Runtime may also be used for schemas that do not conform to it. For example, both systems can be used to query a single denormalized table. However, many of the features that Relay Runtime provides, such as caching and normalization, work best when the data is represented as a normalized graph with stable identities for discrete pieces of information.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="store-operations">Store Operations<a aria-hidden="true" class="hash-link" href="#store-operations" title="Direct link to heading">​</a></h3><p>The <code>Store</code> is the source of truth for application data and provides the following core operations.</p><ul><li><p><code>lookup(selector: Selector): Snapshot</code>: Reads the results of a selector from the store, returning the value given the data currently in the store.</p></li><li><p><code>subscribe(snapshot: Snapshot, callback: (snapshot: Snapshot) =&gt; void): Disposable</code>: Subscribe to changes to the results of a selector. The callback is called when data has been published to the store that would cause the results of the snapshot&#x27;s selector to change.</p></li><li><p><code>publish(source: RecordSource): void</code>: Update the store with new information. All updates to the store are expressed in this form, including the results of queries/mutation/subscriptions as well as optimistic mutation updates. All of those operations internally create a new <code>RecordSource</code> instance and ultimately publish it to the store. Note that <code>publish()</code> does <em>not</em> immediately update any <code>subscribe()</code>-ers. Internally, the store compares the new <code>RecordSource</code> with its internal source, updating it as necessary:</p><ul><li>Records that exist only in the published source are added to the store.</li><li>Records that exist in both are merged into a new record (inputs unchanged), with the result added to the store.</li><li>Records that are null in the published source are deleted (set to null) in the store.</li><li>Records with a special sentinel value are removed from the store. This supports un-publishing optimistically created records.</li></ul></li><li><p><code>notify(): void</code>: Calls any <code>subscribe()</code>-ers whose results have changed due to intervening <code>publish()</code>-es. Separating <code>publish()</code> and <code>notify()</code> allows for multiple payloads to be published before performing any downstream update logic (such as rendering).</p></li><li><p><code>retain(selector: Selector): Disposable</code>: Ensure that all the records necessary to fulfill the given selector are retained in-memory. The records will not be eligible for garbage collection until the returned reference is disposed.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_31ik" id="example-data-flow-fetching-query-data">Example Data Flow: Fetching Query Data<a aria-hidden="true" class="hash-link" href="#example-data-flow-fetching-query-data" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               ┌───────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               │         </span><span class="token maybe-class-name">Query</span><span class="token plain">         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               └───────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           ▼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                             ┌ ─ ─ ─ ┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         fetch ◀────────────▶ </span><span class="token maybe-class-name">Server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                             └ ─ ─ ─ ┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     ┌─────┴───────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     ▼             ▼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               ┌──────────┐  ┌──────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               │  </span><span class="token maybe-class-name">Query</span><span class="token plain">   │  │ </span><span class="token maybe-class-name">Response</span><span class="token plain"> │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               └──────────┘  └──────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     │             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     └─────┬───────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           ▼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       normalize</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           ▼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               ┌───────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               │     </span><span class="token maybe-class-name">RecordSource</span><span class="token plain">      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               │                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               │┌──────┐┌──────┐┌─────┐│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               ││Record││Record││ </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> ││</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               │└──────┘└──────┘└─────┘│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               └───────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ol><li>The query is fetched from the network.</li><li>The query and response are traversed together, extracting the results into <code>Record</code> objects which are added to a fresh <code>RecordSource</code>.</li></ol><p>This fresh <code>RecordSource</code> would then be published to the store:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        publish</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           ▼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             ┌───────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │           </span><span class="token maybe-class-name">Store</span><span class="token plain">           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ ┌───────────────────────┐ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ │     </span><span class="token maybe-class-name">RecordSource</span><span class="token plain">      │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ │                       │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ │┌ ─ ─ ─ ┌ ─ ─ ─ ┌ ─ ─ ┐│ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ │ </span><span class="token maybe-class-name">Record│</span><span class="token plain"> </span><span class="token maybe-class-name">Record│</span><span class="token plain">  </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">  │ │  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> records are updated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ │└ ─ ─ ─ └ ─ ─ ─ └ ─ ─ ┘│ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ └───────────────────────┘ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ ┌───────────────────────┐ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ │     </span><span class="token maybe-class-name">Subscriptions</span><span class="token plain">     │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ │                       │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ │┌──────┐┌──────┐┌─────┐│ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ ││ </span><span class="token maybe-class-name">Sub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token property-access">││</span><span class="token plain"> </span><span class="token maybe-class-name">Sub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token property-access">││</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> ││ │ </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> subscriptions </span><span class="token keyword control-flow" style="color:#00009f">do</span><span class="token plain"> not fire yet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ │└──────┘└──────┘└─────┘│ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ └───────────────────────┘ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             └───────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Publishing the results updates the store but does <em>not</em> immediately notify any subscribers. This is accomplished by calling <code>notify()</code>...</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        notify</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           ▼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             ┌───────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │           </span><span class="token maybe-class-name">Store</span><span class="token plain">           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ ┌───────────────────────┐ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ │     </span><span class="token maybe-class-name">RecordSource</span><span class="token plain">      │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ │                       │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ │┌──────┐┌──────┐┌─────┐│ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ ││Record││Record││ </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> ││ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ │└──────┘└──────┘└─────┘│ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ └───────────────────────┘ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ ┌───────────────────────┐ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ │     </span><span class="token maybe-class-name">Subscriptions</span><span class="token plain">     │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ │                       │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ │┌ ─ ─ ─ ┌ ─ ─ ─ ┌ ─ ─ ┐│ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ │  </span><span class="token maybe-class-name">Sub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token property-access">│</span><span class="token plain">  </span><span class="token maybe-class-name">Sub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token property-access">│</span><span class="token plain">  </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">  │ │ </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> affected subscriptions fire</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ │└ ─│─ ─ └ ─│─ ─ └ ─│─ ┘│ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             │ └───┼───────┼───────┼───┘ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             └─────┼───────┼───────┼─────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   │       │       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   ▼       │       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               callback    │       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           ▼       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       callback    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                   ▼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               callback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>...which calls the callbacks for any <code>subscribe()</code>-ers whose results have changed. Each subscription is checked as follows:</p><ol><li>First, the list of data IDs that have changed since the last <code>notify()</code> is compared against data IDs listed in the subscription&#x27;s latest <code>Snapshot</code>. If there is no overlap, the subscription&#x27;s results cannot possibly have changed (if you imagine the graph visually, there is no overlap between the part of the graph that changed and the part that is selected). In this case the subscription is ignored, otherwise processing continues.</li><li>Second, any subscriptions that do have overlapping data IDs are re-read, and the new/previous results are compared. If the result has not changed, the subscription is ignored (this can occur if a field of a record changed that is not relevant to the subscription&#x27;s selector), otherwise processing continues.</li><li>Finally, subscriptions whose data actually changed are notified via their callback.</li></ol><h3 class="anchor anchorWithStickyNavbar_31ik" id="example-data-flow-reading-and-observing-the-store">Example Data Flow: Reading and Observing the Store<a aria-hidden="true" class="hash-link" href="#example-data-flow-reading-and-observing-the-store" title="Direct link to heading">​</a></h3><p>Products access the store primarily via <code>lookup()</code> and <code>subscribe()</code>. Lookup reads the initial results of a fragment, and subscribe observes that result for any changes. Note that the output of <code>lookup()</code> - a <code>Snapshot</code> - is the input to <code>subscribe()</code>. This is important because the snapshot contains important information that can be used to optimize the subscription - if <code>subscribe()</code> accepted only a <code>Selector</code>, it would have to re-read the results in order to know what to subscribe to, which is less efficient.</p><p>Therefore a typical data flow is as follows - note that this flow is managed automatically by higher-level APIs such as React/Relay. First a component will lookup the results of a selector against a record source (e.g. the store&#x27;s canonical source):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ┌───────────────────────┐       ┌──────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │     </span><span class="token maybe-class-name">RecordSource</span><span class="token plain">      │       │              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │                       │       │              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │┌──────┐┌──────┐┌─────┐│       │   </span><span class="token maybe-class-name">Selector</span><span class="token plain">   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ││Record││Record││ </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> ││       │              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │└──────┘└──────┘└─────┘│       │              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └───────────────────────┘       └──────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                └──────────────┬────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               │  lookup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               </span><span class="token function" style="color:#d73a49">│</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               ▼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        ┌─────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        │             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        │  </span><span class="token maybe-class-name">Snapshot</span><span class="token plain">   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        │             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        └─────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               │  render</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> etc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               ▼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Next, it will <code>subscribe()</code> using this snapshot in order to be notified of any changes - see the above diagram for <code>publish()</code> and <code>notify()</code>.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/v9.0.0/compiler-architecture/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->Compiler Architecture</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/v9.0.0/videos/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Videos<!-- --> »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#comparison-to-classic-relay" class="table-of-contents__link toc-highlight">Comparison to Classic Relay</a></li><li><a href="#data-types" class="table-of-contents__link toc-highlight">Data Types</a></li><li><a href="#data-model" class="table-of-contents__link toc-highlight">Data Model</a><ul><li><a href="#store-operations" class="table-of-contents__link toc-highlight">Store Operations</a></li><li><a href="#example-data-flow-fetching-query-data" class="table-of-contents__link toc-highlight">Example Data Flow: Fetching Query Data</a></li><li><a href="#example-data-flow-reading-and-observing-the-store" class="table-of-contents__link toc-highlight">Example Data Flow: Reading and Observing the Store</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_self" href="/docs/">Introduction</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_self" href="/users/">User Showcase</a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/data-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Data Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/cookie-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Cookie Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/relay.svg" alt="" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/img/relay.svg" alt="" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></div></div></div></footer></div>
<script src="/assets/js/runtime~main.f7f66203.js"></script>
<script src="/assets/js/main.b60abdb4.js"></script>
</body>
</html>